var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__slice=[].slice;(function(e,t,n){"use strict";var r,i;i={content:"<div class='mouser-container'><span class='pulsar'></span><div class='mouser-pointer'></div></div>"};r=function(){function r(t){this.passClick=__bind(this.passClick,this);t=e.extend({},i,t);this.content=t.content;this.id=t.id||this.generateGUID();this.findOrCreateElement();this.setMouserId();this.bindClickHandlers()}r.prototype.generateGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;t=Math.random()*16|0;n=e==="x"?t:t&3|8;return n.toString(16)})};r.prototype.findOrCreateElement=function(){var t;if(typeof this.content==="string"){t=e("#"+this.id);if(t.length>0){return this.element=t}else{return this.element=this.addElementToBody()}}else{return this.element=e(this.content)}};r.prototype.addElementToBody=function(){if(e("body").length===0){return setTimeout(this.addElementToBody,100)}else{return this.element_cache=e(this.content).appendTo("body")}};r.prototype.setMouserId=function(){this.element.attr("data-mouser-id",this.id);this.element.mouser=this;if(this.element[0]!=null){return this.element[0].mouser=this}};r.prototype.bindClickHandlers=function(){return this.element.off("click.passthrough").on("click.passthrough",this.passClick)};r.prototype.passClick=function(t){var r;this.element.hide();r=n.elementFromPoint(t.clientX,t.clientY);e(r).click();return this.element.show()};r.prototype.reset=function(){this.clearQueue();this.element.popover("destroy");if(this.timeout!=null){clearInterval(this.timeout)}this.resume();e(n).off("."+this.id);this.pulsate(false);return this};r.prototype.center=function(e){var t;t=this.element.outerWidth()/2;if(typeof e.left==="number"){e.left-=t}if(typeof e.top==="number"){e.top-=t}return e};r.prototype.hasQueued=function(){return this.element.queue().length>0};r.prototype.clearQueue=function(){return this.element.queue([])};r.prototype.fadeIn=function(e){var t=this;this.runner(function(){return t.element.addClass("visible")});if(e!=null){return this.element}else{return this}};r.prototype.fadeOut=function(e){var t=this;this.runner(function(){return t.element.removeClass("visible").popover("destroy")});if(e!=null){return this.element}else{return this}};r.prototype.show=function(e){return this.fadeIn()};r.prototype.hide=function(e){return this.fadeOut(e)};r.prototype.pause=function(){return this.element.data("paused",true)};r.prototype.resume=function(){return this.element.data("paused",false)};r.prototype.paused=function(){return this.element.data("paused")};r.prototype.move=function(e){var t,n=this;t=arguments;return this.runner(function(){return n._move(t,{duration:1e3})},1e3)};r.prototype.teleport=function(e){var t,n=this;t=arguments;return this.runner(function(){return n._move(t,{duration:0,scrollWindow:false})},200)};r.prototype.click=function(e){var t=this;if(arguments.length>0){this.move.apply(this,arguments)}return this.runner(function(){return t._click()},400)};r.prototype.doubleclick=function(e){this.click(e);return this.click()};r.prototype.realClick=function(t){this.click(t);return this.runner(function(){return e(t).click()})};r.prototype.pulsate=function(e){var t=this;if(e==null){e=true}if(e){this.runner(function(){return t.element.find(".pulsar").addClass("pulse")})}else{this.runner(function(){return t.element.find(".pulsar").removeClass("pulse")})}return this};r.prototype.pulsateUntilClicked=function(e){if(e!=null){this.move(e)}this.pulsate();this.waitForEvent("click",e);return this.pulsate(false)};r.prototype.waitForEvent=function(t,r){var i,s=this;if(!(r!=null)){r='[data-mouser-id="'+this.id+'"]'}i=t+"."+this.id;return this.runner(function(){s.pause();return e(n).on(i,r,function(){s.resume();return e(n).off(i)})})};r.prototype.delay=function(e){this.element.delay(e);return this};r.prototype.runner=function(e,t){var n=this;return this.queue(function(n){e();if(t!=null){return setTimeout(n,t)}else{return n()}})};r.prototype.annotate=function(t){var n,r,i,s=this;r={trigger:"manual"};switch(typeof t){case"string":t={content:t};break;case"object":break;default:console.log("Tooltip received invalid input!");return false}if(typeof t==="object"){i=e.extend(true,r,t);n=this.element;return this.runner(function(){n.popover("hide").addClass("has-popover");return setTimeout(function(){return n.popover("destroy").popover(i).popover("show")},500)},1e3)}};r.prototype.annotateUntilClicked=function(t){var n,r=this;if(typeof t==="string"){t={content:t}}n={linkOpts:"onclick='return false';",url:"#",html:true};t=e.extend({},n,t);t.content+="<p class='mouser-next-link-container'><a href='"+t.url+"' id='"+this.id+"-next-link' class='mouser-next-link' "+t.linkOpts+">Continue â†’</a></p>";this.annotate(t);this.waitForEvent("click.mouser","#"+this.id+"-next-link");this.runner(function(){return r.element.popover("destroy")});return this};r.prototype.queue=function(e,t){var n=this;if(t==null){t="fx"}this.element.queue(t,function(t){return n._wrapWithPause(e,t)});if(!this.isMoving){this.dequeue}return this};r.prototype.dequeue=function(e){if(this.hasQueued()){this.isMoving=true}else{this.isMoving=false}if(e!=null){return this.element.dequeue(e)}else{return this.element.dequeue()}};r.prototype._wrapWithPause=function(e,t){var n=this;if(this.paused()){return this.timeout=setTimeout(function(){return n._wrapWithPause(e,t)},250)}else{return e(t)}};r.prototype._parseMoveArgs=function(){var t,n,r;n=1<=arguments.length?__slice.call(arguments,0):[];switch(typeof n[0]){case void 0:case null:console.log("Move requires an element to move to");return false;case"string":if(n.length===2&&typeof n[1]!=="object"){r={};if(n[0]!==0){r.left=n[0]}if(n[1]!==0){r.top=n[1]}}else{t=e(n[0]);if(t.length>0){r=t.offset();r.left+=t.outerWidth()/2;r.top+=t.outerHeight()/2;if(n.length===2&&typeof n[1]==="object"){r.left+=n[1].left;r.top+=n[1].top}else if(n.length===3&&typeof n[1]==="number"){r.left+=n[1];r.top+=n[2]}}else{console.log("Could not find element "+n[0]+" to move to");return false}}break;case"object":r=n[0];if(!(r.top!=null&&r.left!=null||r.x!=null&&r.y!=null)){console.log("Object must have both a top and left property");return false}else if(n.length===2&&typeof n[1]==="object"){if(typeof r.left==="number"){r.left+=n[1].left}if(typeof r.top==="number"){r.top+=n[1].top}}break;case"number":r={left:n[0],top:n[1]};break;default:console.log("Invalid coordinates to move to: "+n)}return r};r.prototype._move=function(n,r){var i,s,o;o=e.extend({queue:"moveNow"},this._parseMoveArgs.apply(this,n),r);o=this.center(o);if(r.scrollWindow!==false){i=e(t);s=i.scrollTop()+i.innerHeight();if(o.top>s){e("body").animate({scrollTop:o.top-200})}}this.element.transition(o);this.dequeue("moveNow");return this};r.prototype._click=function(){var e;e=this.element.addClass("active");return setTimeout(function(){return e.removeClass("active")},200)};return r}();e.fn.mouser=function(e){return this.map(function(){var e,t;if(!(t=this.mouser)){e={content:this,id:this.id};return this.mouser=t=new r(e)}else{return this.mouser}})};return t.Mouser=r})(jQuery,window,document)
